{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "An example of a zoomable circle packing layout for hierarchical data.",
  "width": 600,
  "height": 600,
  "padding": 5,

  "signals": [
    {
      "name": "click_to_zoom_in",
      "init": "8000",
      "description": "clicking on the mark to zoom-in",
      "on": [
        {
          "events": {"type": "click", "markname": "circles"},
          "update": "90000"
        }
      ]
    },
    {
      "name": "timer",
      "description": "The timer to be used for transitions such as zoom, fade, etc.",
      "on": [{"events": "timer", "update": "now()"}]
    },

    {
      "name": "interpolateTime",
      "description": "the start and end times in miliseconds for animation interpolations",
      "on": [
        {
          "events": 
                  {
                    "type": "click",
                    "markname": "circles"
                  },
                  "update": "{'start': timer, 'end': timer+750}"
          
        }
      ]
    },
    {
      "name": "t",
      "description": "The normalized time for easing",
      "update": "interpolateTime ? clamp((timer-interpolateTime.start)/(interpolateTime.end-interpolateTime.start), 0, 1): null"
    },
    {
      "name": "tEase",
      "description": "The easing calculation. Currently set as easeInOutCubic",
      "update": "t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1"
    }


      ],
    

"marks": 
  [
    {
      "name": "circles",
      "description": "a zoomable circle",
      "type": "symbol",
      "encode":               // An object containing a set of visual encoding rules for mark properties.
      {
        "enter":
        {
          "shape": {"value": "circle"},
          "angle":{"value":0},
          //"size" :{"value":90000},
          "fill" :{"value":"#00008B"},
          "opacity":{"value":"1"},  //general opacity for all properties
          "fillOpacity":{"value":"0.7"},   // opacity for fill
          "stroke" :{"value":"#000000"}, // border for circle
          "strokeWidth":{"value":"3"},   // width of the border
          "strokeOpacity":{"value":"1"},
          "cursor" :{"value":"zoom-in"},
          "x":{"value":100},
          "y":{"value":100},

        },
        "update" : 
        {
          "size" : {"signal":"pow(2*(2 * lerp([1, 50],tEase)),2)"},
          "x":{"signal":"300"},
          "y":{"signal":"300"}
        }

     }      
    }
  ]
}
